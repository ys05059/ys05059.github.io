---
layout: post
title: 코루틴 개념
description: 
image: 
category:
- kotlin
- coroutines
tags:
- Coroutine
- Kotlin
date: 2024-01-25 18:28 +0900
---

## 코틀린에서 코루틴이란?


#### 코루틴 분류
- 코틀린 언어 차원에서 지원하는 코루틴
- 코틀린 코루틴 라이브러리(kotlinx.coroutines)


#### 언어 차원에서 지원하는 코루틴
- 컴파일러가 지원하며 kotlin.coroutines 패키지에 포함되어 있음
- 자유도를 보장하기 위해 최소한의 비동기 처리를 가능하게 함
- 직접 사용하기 쉽지 않음
- 어플리케이션 개발보다 라이브러리 개발에 적합함

#### 코틀린 코루틴 라이브러리(kotlinx.coroutines)
- 의존성을 별도로 추가해야 함
- launch, async, Deffered 등 다양한 기능 제공
- 직접 사용하기 편리함

## kotlinx.coroutines 라이브러리
핵심 개념들을 알아보자

### Coroutine Builder
> 코루틴을 만들어주는 역할을 하는 함수
> 
> 모든 suspend 함수들은 또 다른 suspend 함수에 의해 호출되어야 하기 때문에 시작 지점이 있어야하고 Coroutine Builder가 그 역할을 한다.

#### launch 빌더
launch 함수는 CorutineScope 인터페이스의 확장 함수이다.  
즉, `CoroutineScope구현체.launch{}` 이런 방식으로 사용할 수 있다  

**특징**  
결과값을 반환하지 않는다

#### runCatching 빌더
코루틴이 thread를 블로킹할 필요가 있는 경우 사용하는 빌더이다.  
코루틴이 중단 되었을 경우 runBlocking 빌더는 시작한 thread를 
중단시킨다. 

> runCatching을 사용하는 경우  
> 1. main 함수에서 프로그램이 끝나는 걸 방지하기 위한 경우
> 2. Unit Test 함수가 끝나는 것 방지하기 위한 경우  

하지만 현재는 거의 사용되지 않는다. 
메인 함수는 runBlocking를 붙이는 대신 suspend fun main()을 사용하고 유닛테스트에서는 runTest가 주로 사용된다. 
#### asynce 빌더
 

